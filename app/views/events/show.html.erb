<div class="container my-5">
  <!-- Basic info about the event -->
  <div class="row">
    <div class="col-sm-12 col-md-4">
      <h4 class="text-uppercase text-primary"><%=@event.cuisine%></h4>
      <h2 class="mb-3"><%= @event.title %></h2>
      <div class="mb-4">
        <!-- a user can edit the event that he created -->
        <% if policy(@event).edit? %>
          <%= link_to edit_event_path(@event.id) do %>
            <i class="far fa-edit"></i>
          <% end %>
        <% end %>
        <!-- a user can only delete the event created by himself -->
        <% if policy(@event).destroy?%>
          <%= link_to event_path(@event.id), method: :delete, data: {confirm: 'Are you sure?'} do %>
            <i class="far fa-trash-alt"></i>
          <% end %>
        <% end %>
      </div>
      <div class="mb-4">
        <ul class="list-unstyled">
          <li>
            <%= image_tag "map-marker.svg", class: "mb-2 mr-1" %>
            <%= @event.location %>
          </li>
          <li>
            <%= image_tag "time.svg", class: "mb-2 mr-1" %>
            <%= @event.date.strftime("%b %e, %l:%M %p") %>
          </li>
          <li>
            <%= image_tag "user.svg", class: "mb-2 mr-1" %>
            <%= @event.capacity %>
          </li>
          <li>
            <%= image_tag "dollar.svg", class: "mb-2 mr-1" %>
            <%= @event.price%>
          </li>
        </ul>
      </div>

      <!-- a user can not book his own event -->
      <% if current_user != @event.user %>
        <%= link_to "Book", new_event_booking_path(@event.id), class: "btn btn-primary text-light" %>
      <% end %>

    </div>
    <div class="col-sm-12 col-md-8">
      <% if @event.image.nil? %>
        <%= image_tag ("https://images.unsplash.com/photo-1557872943-16a5ac26437e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1432&q=80")%>
      <% else %>
        <div class="card-img-large rounded" style="background-image: url('<%= cl_image_path @event.image %>')"></div>
      <% end %>
    </div>
  </div>
  <hr class="my-5">
  <!-- Event description -->
  <div class="row">
    <div class="col-sm-12 col-md-4">
      <h4>About this event</h4>
    </div>
    <div class="col-sm-12 col-md-8">
      <p>
        <%= @event.description%>
      </p>
    </div>
  </div>
  <hr class="my-5">
  <!-- Participants -->
  <!-- TODO (huifang): Bookings to be seeded -->
  <div class="row">
    <div class="col-sm-12 col-md-4">
      <h4>Participants</h4>
    </div>
    <div class="col-sm-12 col-md-8">
      <% @bookings.each do |booking| %>
        <div class="col-sm-12 col-md-6 col-lg-4">
          <div class="card my-3">
            <div class="card-img-top" style="background-image: url('<%= cl_image_path booking.event.image %>')"></div>
            <div class="card-body">
              <p><%= booking.user.first_name %></p>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <hr class="my-5">
  <!-- Reviews -->
  <!-- TODO (huifang): Reviews to be seeded -->
  <div class="row">
    <div class="col-sm-12 col-md-4">
      <h4>Reviews</h4>
      <i class="far fa-star"></i>
      <i class="far fa-star"></i>
      <i class="far fa-star"></i>
      <i class="far fa-star"></i>
      <i class="far fa-star"></i>
    </div>
    <div class="col-sm-12 col-md-8">
      <p>
        Reviews to be seeded!
      </p>
    </div>
  </div>
</div>
<div
  id="map"
  style="width: 100%;
  height: 600px;"
  data-markers="<%= @markers.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
></div>
